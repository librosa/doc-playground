<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>librosa.sequence.viterbi_binary &mdash; librosa 0.7.2 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="librosa.sequence.transition_uniform" href="librosa.sequence.transition_uniform.html" />
    <link rel="prev" title="librosa.sequence.viterbi_discriminative" href="librosa.sequence.viterbi_discriminative.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
            <a href="../index.html">
            <img src="../_static/librosa_logo_text.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../core.html">Core IO and DSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../display.html">Display</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feature.html">Feature extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../onset.html">Onset detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../beat.html">Beat and tempo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../decompose.html">Spectrogram decomposition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../effects.html">Effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../output.html">Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../segment.html">Temporal segmentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../sequence.html">Sequential modeling</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../sequence.html#sequence-alignment">Sequence alignment</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../sequence.html#viterbi-decoding">Viterbi decoding</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="librosa.sequence.viterbi.html">librosa.sequence.viterbi</a></li>
<li class="toctree-l3"><a class="reference internal" href="librosa.sequence.viterbi_discriminative.html">librosa.sequence.viterbi_discriminative</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">librosa.sequence.viterbi_binary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../sequence.html#transition-matrices">Transition matrices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../util.html">Utilities</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filters.html">Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cache.html">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ioformats.html">Advanced I/O Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced.html">Advanced examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">librosa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../sequence.html">Sequential modeling</a> &raquo;</li>
      <li>librosa.sequence.viterbi_binary</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/generated/librosa.sequence.viterbi_binary.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             

<div class="admonition danger">
    <p class="admonition-title"> Caution </p>
  <p>
    
        
            You're reading an old version of this documentation.
            If you want up-to-date information, please have a look at <a href="../../0.9.1/index.html">0.9.1</a>.
        
    
  </p>
</div>


  <section id="librosa-sequence-viterbi-binary">
<h1>librosa.sequence.viterbi_binary<a class="headerlink" href="#librosa-sequence-viterbi-binary" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="librosa.sequence.viterbi_binary">
<span class="sig-prename descclassname"><span class="pre">librosa.sequence.</span></span><span class="sig-name descname"><span class="pre">viterbi_binary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prob</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p_init</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_logp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/librosa/sequence.html#viterbi_binary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#librosa.sequence.viterbi_binary" title="Permalink to this definition">¶</a></dt>
<dd><p>Viterbi decoding from binary (multi-label), discriminative state predictions.</p>
<p>Given a sequence of conditional state predictions <em class="xref py py-obj">prob[s, t]</em>,
indicating the conditional likelihood of state <em class="xref py py-obj">s</em> being active
conditional on observation at time <em class="xref py py-obj">t</em>, and a 2*2 transition matrix
<em class="xref py py-obj">transition</em> which encodes the conditional probability of moving from
state <em class="xref py py-obj">s</em> to state <em class="xref py py-obj">s</em> (not-<em class="xref py py-obj">s</em>), the Viterbi algorithm computes the
most likely sequence of states from the observations.</p>
<p>This function differs from <a class="reference internal" href="librosa.sequence.viterbi_discriminative.html#librosa.sequence.viterbi_discriminative" title="librosa.sequence.viterbi_discriminative"><code class="xref py py-obj docutils literal notranslate"><span class="pre">viterbi_discriminative</span></code></a> in that it does not assume the
states to be mutually exclusive.  <a class="reference internal" href="#librosa.sequence.viterbi_binary" title="librosa.sequence.viterbi_binary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">viterbi_binary</span></code></a> is implemented by
transforming the multi-label decoding problem to a collection
of binary Viterbi problems (one for each <em>state</em> or label).</p>
<p>The output is a binary matrix <em class="xref py py-obj">states[s, t]</em> indicating whether each
state <em class="xref py py-obj">s</em> is active at time <em class="xref py py-obj">t</em>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>prob</strong><span class="classifier">np.ndarray [shape=(n_steps,) or (n_states, n_steps)], non-negative</span></dt><dd><p><em class="xref py py-obj">prob[s, t]</em> is the probability of state <em class="xref py py-obj">s</em> being active
conditional on the observation at time <em class="xref py py-obj">t</em>.
Must be non-negative and less than 1.</p>
<p>If <em class="xref py py-obj">prob</em> is 1-dimensional, it is expanded to shape <em class="xref py py-obj">(1, n_steps)</em>.</p>
</dd>
<dt><strong>transition</strong><span class="classifier">np.ndarray [shape=(2, 2) or (n_states, 2, 2)], non-negative</span></dt><dd><p>If 2-dimensional, the same transition matrix is applied to each sub-problem.
<em class="xref py py-obj">transition[0, i]</em> is the probability of the state going from inactive to <em class="xref py py-obj">i</em>,
<em class="xref py py-obj">transition[1, i]</em> is the probability of the state going from active to <em class="xref py py-obj">i</em>.
Each row must sum to 1.</p>
<p>If 3-dimensional, <em class="xref py py-obj">transition[s]</em> is interpreted as the 2x2 transition matrix
for state label <em class="xref py py-obj">s</em>.</p>
</dd>
<dt><strong>p_state</strong><span class="classifier">np.ndarray [shape=(n_states,)]</span></dt><dd><p>Optional: marginal probability for each state (between [0,1]).
If not provided, a uniform distribution (0.5 for each state)
is assumed.</p>
</dd>
<dt><strong>p_init</strong><span class="classifier">np.ndarray [shape=(n_states,)]</span></dt><dd><p>Optional: initial state distribution.
If not provided, it is assumed to be uniform.</p>
</dd>
<dt><strong>return_logp</strong><span class="classifier">bool</span></dt><dd><p>If <em class="xref py py-obj">True</em>, return the log-likelihood of the state sequence.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>Either <em class="xref py py-obj">states</em> or <em class="xref py py-obj">(states, logp)</em>:</dt><dd></dd>
<dt><strong>states</strong><span class="classifier">np.ndarray [shape=(n_states, n_steps)]</span></dt><dd><p>The most likely state sequence.</p>
</dd>
<dt><strong>logp</strong><span class="classifier">np.ndarray [shape=(n_states,)]</span></dt><dd><p>If <em class="xref py py-obj">return_logp=True</em>, the log probability of each state activation
sequence <em class="xref py py-obj">states</em></p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="librosa.sequence.viterbi.html#librosa.sequence.viterbi" title="librosa.sequence.viterbi"><code class="xref py py-obj docutils literal notranslate"><span class="pre">viterbi</span></code></a></dt><dd><p>Viterbi decoding from observation likelihoods</p>
</dd>
<dt><a class="reference internal" href="librosa.sequence.viterbi_discriminative.html#librosa.sequence.viterbi_discriminative" title="librosa.sequence.viterbi_discriminative"><code class="xref py py-obj docutils literal notranslate"><span class="pre">viterbi_discriminative</span></code></a></dt><dd><p>Viterbi decoding for discriminative (mutually exclusive) state predictions</p>
</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<p>In this example, we have a sequence of binary state likelihoods that we want to de-noise
under the assumption that state changes are relatively uncommon.  Positive predictions
should only be retained if they persist for multiple steps, and any transient predictions
should be considered as errors.  This use case arises frequently in problems such as
instrument recognition, where state activations tend to be stable over time, but subject
to abrupt changes (e.g., when an instrument joins the mix).</p>
<p>We assume that the 0 state has a self-transition probability of 90%, and the 1 state
has a self-transition probability of 70%.  We assume the marginal and initial
probability of either state is 50%.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trans</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">sequence</span><span class="o">.</span><span class="n">viterbi_binary</span><span class="p">(</span><span class="n">prob</span><span class="p">,</span> <span class="n">trans</span><span class="p">,</span> <span class="n">p_state</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">p_init</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="go">array([[0, 0, 0, 0, 1, 1, 1, 0, 0, 0]])</span>
</pre></div>
</div>
</dd></dl>

</section>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="librosa.sequence.viterbi_discriminative.html" class="btn btn-neutral float-left" title="librosa.sequence.viterbi_discriminative" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="librosa.sequence.transition_uniform.html" class="btn btn-neutral float-right" title="librosa.sequence.transition_uniform" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013--2022, librosa development team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: 0.7.2
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Releases</dt>
      <dd><a href="librosa.sequence.viterbi_binary.html">0.7.2</a></dd>
      <dd><a href="../../0.8.1/index.html">0.8.1</a></dd>
      <dd><a href="../../0.9.0/index.html">0.9.0</a></dd>
      <dd><a href="../../0.9.1/index.html">0.9.1</a></dd>
    </dl>
    <dl>
      <dt>Development versions</dt>
      <dd><a href="../../main/index.html">main</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-171031946-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-171031946-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>